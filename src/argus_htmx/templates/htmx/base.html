{% extends "htmx_base.html" %}

{% block head %}
    <script src="https://unpkg.com/htmx.org@1.9.12"
            integrity="sha384-ujb1lZYygJmzgSwoxRggbCHcjc0rB2XoQrxeTUQyRjrOnlCoYta87iKBWq3EsdM2"
            crossorigin="anonymous"></script>
    <!-- HTMX Config -->
    <meta name="htmx-config" content='{"useTemplateFragments":"true"}'>
{% endblock head %}

{% block header %}
    <header class="bg-neutral text-neutral-content">
        <nav class="navbar">
            <div class="navbar-start">
                <a class="btn btn-ghost text-xl" href="{% url 'htmx:incident-list' %}">Argus Logo</a>
            </div>
            <div class="navbar-center flex">
                <ul class="menu menu-horizontal px-1">
                    {% block navlinks %}
                        <li><a href="{% url 'htmx:incident-list' %}">Incidents</a></li>
                        <li><a href="{% url 'htmx:timeslot-placeholder' %}">Timeslots</a></li>
                        <li><a href="{% url 'htmx:notificationprofile-placeholder' %}">Profiles</a></li>
                    {% endblock navlinks %}
                </ul>
            </div>
            <div class="navbar-end">
                {% block userlink %}

                    {% if request.user.is_authenticated %}
                        <div class="dropdown dropdown-end">
                            <div tabindex="0" role="button" class="btn btn-base-200 btn-circle avatar placeholder">
                                <div class="w-10 rounded-full ring-base-200 ring-offset-primary ring ring-offset-2">
                                    <span class="text-2xl capitalize">{{ request.user|make_list|first }}</span>
                                </div>
                            </div>
                            <ul
                                    tabindex="0"
                                    class="menu menu-sm dropdown-content bg-base-200 text-base-content rounded-box z-[1] mt-3 w-52 p-2 shadow">
                                <li class="menu-title">
                                    Logged in as: <span class="text-info">{{ request.user }}</span>
                                    <div class="divider divider-secondary my-0"></div>
                                </li>
                                <li>
                                    <a class="justify-between" href="{% url 'htmx:theme-list' %}">
                                        Theme
                                        <span class="badge badge-primary">{{ theme }}</span>
                                    </a>
                                </li>
                                <li>
                                    <form action="{% url "htmx:logout" %}" method="POST">
                                        {% csrf_token %}
                                        <button type="submit">Log out</button>
                                    </form>
                                </li>
                            </ul>
                        </div>
                    {% else %}
                        <a class="btn" href="{% url 'htmx:login' %}">Log in</a>
                    {% endif %}
                {% endblock %}
            </div>
        </nav>
    </header>
{% endblock header %}
